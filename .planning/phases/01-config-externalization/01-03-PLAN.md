---
phase: 01-config-externalization
plan: 03
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - platforms/base.py
  - platforms/indeed.py
  - platforms/dice.py
  - platforms/remoteok.py
autonomous: true

must_haves:
  truths:
    - "BasePlatform uses timing settings from config instead of hardcoded Config.NAV_DELAY_MIN/MAX"
    - "IndeedPlatform uses settings for page_load_timeout and min_salary"
    - "DicePlatform uses settings for credentials and page_load_timeout"
    - "RemoteOKPlatform uses settings for min_salary and candidate profile"
    - "All platform modules have zero references to the old Config class"
    - "Platform behavior is unchanged -- same search URLs, same delays, same credential validation"
  artifacts:
    - path: "platforms/base.py"
      provides: "BasePlatform using TimingConfig from get_settings()"
      contains: "get_settings"
    - path: "platforms/indeed.py"
      provides: "IndeedPlatform using settings for timeouts and salary"
      contains: "get_settings"
    - path: "platforms/dice.py"
      provides: "DicePlatform using settings for credentials and timeouts"
      contains: "get_settings"
    - path: "platforms/remoteok.py"
      provides: "RemoteOKPlatform using settings for salary and candidate profile"
      contains: "get_settings"
  key_links:
    - from: "platforms/base.py"
      to: "config.py"
      via: "get_settings().timing for delay values"
      pattern: "get_settings\\(\\)\\.timing"
    - from: "platforms/dice.py"
      to: "config.py"
      via: "get_settings() for credentials (dice_email, dice_password)"
      pattern: "settings\\.dice_"
    - from: "platforms/remoteok.py"
      to: "config.py"
      via: "get_settings() for min_salary and candidate tech_keywords"
      pattern: "settings\\.search\\.min_salary"
---

<objective>
Migrate all platform modules (base, indeed, dice, remoteok) from the old Config class to get_settings(). This completes the config externalization -- after this plan, zero files import the old Config class.

Purpose: Platform modules are the last consumers of Config. Migrating them means the entire codebase reads from config.yaml and .env via AppSettings.
Output: Updated platform modules with no Config imports, using get_settings() for timing, credentials, salary filters, and candidate data.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-config-externalization/01-CONTEXT.md
@.planning/phases/01-config-externalization/01-RESEARCH.md
@.planning/phases/01-config-externalization/01-01-SUMMARY.md
@platforms/base.py
@platforms/indeed.py
@platforms/dice.py
@platforms/remoteok.py
@config.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate platforms/base.py and platforms/remoteok.py</name>
  <files>platforms/base.py, platforms/remoteok.py</files>
  <action>
  **platforms/base.py:**

  1. Replace `from config import Config` with `from config import get_settings, DEBUG_SCREENSHOTS_DIR`
  2. Update `human_delay()` method:
     - Replace `Config.NAV_DELAY_MIN` / `Config.NAV_DELAY_MAX` with `get_settings().timing.nav_delay_min` / `get_settings().timing.nav_delay_max`
     - Replace `Config.FORM_DELAY_MIN` / `Config.FORM_DELAY_MAX` with `get_settings().timing.form_delay_min` / `get_settings().timing.form_delay_max`
     - Call `get_settings()` once at the start of the method and store in local var `settings` to avoid repeated calls: `settings = get_settings()`
  3. Update `screenshot()` method:
     - Replace `Config.DEBUG_SCREENSHOTS_DIR` with `DEBUG_SCREENSHOTS_DIR` (imported as module constant from config)
  4. No changes to `__init__`, `wait_for_human`, `element_exists`, or abstract methods

  **platforms/remoteok.py:**

  1. Replace `from config import Config` with `from config import get_settings`
  2. Update `search()` method:
     - Replace `Config.MIN_SALARY` with `get_settings().search.min_salary`
     - Store settings in local var: `settings = get_settings()` at method start
  3. Update `_filter_terms()` method:
     - Replace `Config.CANDIDATE.tech_keywords` with `get_settings().build_candidate_profile().tech_keywords`
     - Or more efficiently: `get_settings().scoring.tech_keywords` (tech_keywords live in scoring config, no need to build full profile)
  4. No other changes needed -- RemoteOKPlatform doesn't use browser context or page_load_timeout

  Both files: verify no remaining `Config` references. Follow conventions.
  </action>
  <verify>
  1. `ruff check platforms/base.py platforms/remoteok.py` -- passes
  2. `python -c "from platforms.base import BasePlatform; print('base imports OK')"` -- no errors
  3. `python -c "from platforms.remoteok import RemoteOKPlatform; print('remoteok imports OK')"` -- no errors
  4. `grep -n "from config import Config" platforms/base.py platforms/remoteok.py` -- returns nothing
  5. `grep -n "Config\." platforms/base.py platforms/remoteok.py` -- returns nothing
  </verify>
  <done>platforms/base.py and platforms/remoteok.py use get_settings() for all configuration. No Config class references remain. Timing delays and salary filters read from YAML config.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate platforms/indeed.py and platforms/dice.py</name>
  <files>platforms/indeed.py, platforms/dice.py</files>
  <action>
  **platforms/indeed.py:**

  1. Replace `from config import Config` with `from config import get_settings`
  2. Search-and-replace all `Config.PAGE_LOAD_TIMEOUT` with `get_settings().timing.page_load_timeout`:
     - In `login()`: two occurrences (goto base, goto login, goto base again after login)
     - In `search()`: one occurrence (goto search URL)
     - In `get_job_details()`: one occurrence (goto job URL)
     - In `apply()`: one occurrence (goto job URL)
     - For efficiency, store `settings = get_settings()` at the start of each method that uses it, then use `settings.timing.page_load_timeout`
  3. Update `_build_search_url()`:
     - Replace `Config.MIN_SALARY` with `get_settings().search.min_salary`
  4. No changes to `_extract_card()`, `_is_sponsored()`, `_detect_captcha()`, `_detect_email_verification()`, `_check_challenges()`, or `_parse_salary()` -- these don't reference Config

  **platforms/dice.py:**

  1. Replace `from config import Config` with `from config import get_settings`
  2. Update `login()`:
     - Replace `Config.validate_platform_credentials("dice")` with `get_settings().validate_platform_credentials("dice")`
     - Replace `Config.DICE_EMAIL` with `settings.dice_email` (use local var)
     - Replace `Config.DICE_PASSWORD` with `settings.dice_password`
     - Replace `Config.PAGE_LOAD_TIMEOUT` with `settings.timing.page_load_timeout`
     - Store `settings = get_settings()` at method start
  3. Update `search()`:
     - Replace `Config.PAGE_LOAD_TIMEOUT` with `get_settings().timing.page_load_timeout`
  4. Update `get_job_details()`:
     - Replace `Config.PAGE_LOAD_TIMEOUT` with `get_settings().timing.page_load_timeout`
  5. Update `apply()`:
     - Replace `Config.PAGE_LOAD_TIMEOUT` with `get_settings().timing.page_load_timeout`
  6. No changes to `_build_search_url()`, `_extract_card()`, `_parse_card_text()`, `_parse_salary()` -- Dice doesn't use Config.MIN_SALARY in search URL construction (unlike Indeed)

  Both files: verify no remaining `Config` references. Follow conventions (section markers, docstrings, type hints).
  </action>
  <verify>
  1. `ruff check platforms/indeed.py platforms/dice.py` -- passes
  2. `python -c "from platforms.indeed import IndeedPlatform; print('indeed imports OK')"` -- no errors
  3. `python -c "from platforms.dice import DicePlatform; print('dice imports OK')"` -- no errors
  4. `grep -n "from config import Config" platforms/indeed.py platforms/dice.py` -- returns nothing
  5. `grep -n "Config\." platforms/indeed.py platforms/dice.py` -- returns nothing
  6. Verify complete migration across ALL files: `grep -rn "from config import Config" *.py platforms/*.py webapp/*.py` -- should return absolutely nothing
  7. `grep -rn "Config\." *.py platforms/*.py` -- should return nothing (excluding config.py itself which defines the new classes, and any comments)
  </verify>
  <done>platforms/indeed.py and platforms/dice.py use get_settings() for all configuration. No Config class references remain in any file in the project. Config externalization is complete.</done>
</task>

</tasks>

<verification>
1. `grep -rn "from config import Config" *.py platforms/*.py webapp/*.py` -- returns absolutely nothing
2. `grep -rn "Config\.\(PAGE_LOAD\|MIN_SALARY\|NAV_DELAY\|FORM_DELAY\|DICE_\|INDEED_\|CANDIDATE\|RESUME\|JOB_PIPELINE\|DEBUG_SCREENSHOTS\|ensure_directories\|validate_platform\|get_search\)" *.py platforms/*.py` -- returns nothing
3. `ruff check platforms/base.py platforms/indeed.py platforms/dice.py platforms/remoteok.py` -- all pass
4. All platform modules import correctly without errors
5. `python orchestrator.py --validate` still works after all migrations
</verification>

<success_criteria>
- All four platform files (base.py, indeed.py, dice.py, remoteok.py) use get_settings() instead of Config
- Zero references to the old Config class exist anywhere in the project (except config.py defining AppSettings)
- Timing delays read from config.yaml timing section
- Credentials read from .env via AppSettings
- Salary filters read from config.yaml search.min_salary
- ruff check passes on all platform files
- python orchestrator.py --validate exits 0
</success_criteria>

<output>
After completion, create `.planning/phases/01-config-externalization/01-03-SUMMARY.md`
</output>
