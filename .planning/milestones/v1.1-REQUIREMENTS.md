# Requirements Archive: v1.1 Test Web App

**Archived:** 2026-02-08
**Status:** SHIPPED

For current requirements, see `.planning/REQUIREMENTS.md`.

---

# Requirements: JobFlow v1.1 -- Test Web App

**Defined:** 2026-02-08
**Core Value:** From discovery to application in one tool -- reliably find relevant jobs, present them clearly, make applying frictionless.

## v1.1 Requirements

Requirements for automated test suite and CI pipeline. Each maps to roadmap phases.

### Test Infrastructure

- [x] **INFRA-01**: Test suite has root conftest.py with settings isolation (reset_settings after each test)
- [x] **INFRA-02**: Test suite has in-memory SQLite fixture using JOBFLOW_TEST_DB=1
- [x] **INFRA-03**: Test suite has job factory fixture producing valid Job/JobRecord instances
- [x] **INFRA-04**: Test suite has test config YAML with safe defaults (no real credentials)
- [x] **INFRA-05**: Test suite blocks real API calls (Anthropic, httpx) as safety net
- [x] **INFRA-06**: pyproject.toml has pytest configuration (testpaths, markers, asyncio_mode)

### Unit Tests

- [x] **UNIT-01**: Pydantic models validate correctly (Job, SearchQuery, CandidateProfile, enums)
- [x] **UNIT-02**: Salary normalization handles all formats (hourly/monthly/yearly, USD/CAD, ranges, edge cases)
- [x] **UNIT-03**: Job scoring produces correct 1-5 scores against candidate profile rubric
- [x] **UNIT-04**: Score breakdown generates point-by-point explanations matching rubric
- [x] **UNIT-05**: Cross-platform deduplication detects duplicates by normalized company+title
- [x] **UNIT-06**: Fuzzy dedup handles company name variations (Inc/LLC, spacing, case)
- [x] **UNIT-07**: Resume anti-fabrication validator catches hallucinated content
- [x] **UNIT-08**: Delta detection correctly identifies new vs previously-seen jobs

### Integration Tests -- Database

- [x] **DB-01**: CRUD operations work for all job lifecycle states (insert, update status, delete)
- [x] **DB-02**: FTS5 full-text search returns relevant results and handles special characters
- [x] **DB-03**: Activity log records state transitions with timestamps
- [x] **DB-04**: Bulk status updates apply correctly to multiple jobs
- [x] **DB-05**: Database migration/initialization creates all required tables and indexes

### Integration Tests -- Web

- [x] **WEB-01**: Job list endpoint returns paginated results with correct filtering (score, platform, status)
- [x] **WEB-02**: Job detail endpoint returns full description and metadata
- [x] **WEB-03**: Status update endpoint changes job status and logs activity
- [x] **WEB-04**: CSV export endpoint produces valid CSV with all job fields
- [x] **WEB-05**: JSON export endpoint produces valid JSON matching data schema
- [x] **WEB-06**: Bulk action endpoint handles multi-select status changes
- [x] **WEB-07**: Job import endpoint loads pipeline JSON into database
- [x] **WEB-08**: Search endpoint returns FTS5 results through the API layer

### Integration Tests -- API/Platform

- [x] **API-01**: RemoteOK API response parsing extracts all fields correctly (mocked with respx)
- [x] **API-02**: RemoteOK handles malformed responses and empty results gracefully
- [x] **API-03**: Platform registry discovers and registers all platform modules
- [x] **API-04**: Platform protocol compliance verified for all registered platforms

### Integration Tests -- Config

- [x] **CFG-01**: YAML config loads and validates all settings with pydantic-settings
- [x] **CFG-02**: Config validation rejects invalid values (bad URLs, missing required fields)
- [x] **CFG-03**: Config defaults are applied when optional fields are omitted
- [x] **CFG-04**: Environment variable overrides take precedence over YAML values

### CI Pipeline

- [x] **CI-01**: GitHub Actions workflow runs all tests on push to main and on PR
- [x] **CI-02**: Coverage report generated and enforces minimum threshold (80%)
- [x] **CI-03**: CI runs linting (ruff) alongside tests
- [x] **CI-04**: CI caches Python dependencies and Playwright browsers for speed
- [x] **CI-05**: E2E tests run as a separate optional CI job (not blocking)

### E2E Tests

- [x] **E2E-01**: Dashboard loads and displays job list in browser (Playwright)
- [x] **E2E-02**: Filtering by score/platform/status works end-to-end in browser
- [x] **E2E-03**: Job status change via UI updates correctly and persists
- [x] **E2E-04**: Kanban board drag-and-drop updates job status
- [x] **E2E-05**: Export buttons produce downloadable CSV/JSON files

## Future Requirements (Deferred)

### Performance Testing

- **PERF-01**: Load testing for dashboard with 10K+ jobs in database
- **PERF-02**: Benchmark test suite execution time, alert on regression

### Extended Coverage

- **EXT-01**: AI resume tailoring output quality tests (snapshot-based)
- **EXT-02**: Form filler tests against mock ATS iframes
- **EXT-03**: SSE streaming endpoint tests with async client

## Out of Scope

| Feature | Reason |
|---------|--------|
| Live platform scraping tests | Requires real credentials, fragile selectors, rate limiting |
| Playwright mock objects for scraper code | Anti-pattern -- extract pure parsing functions instead |
| Visual regression testing | Screenshot comparison complexity, dashboard is htmx/server-rendered |
| Mutation testing | Valuable but premature -- add after baseline coverage established |
| Pre-commit hooks | Separate concern from test suite |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| INFRA-01 | Phase 9 | Complete |
| INFRA-02 | Phase 9 | Complete |
| INFRA-03 | Phase 9 | Complete |
| INFRA-04 | Phase 9 | Complete |
| INFRA-05 | Phase 9 | Complete |
| INFRA-06 | Phase 9 | Complete |
| UNIT-01 | Phase 10 | Complete |
| UNIT-02 | Phase 10 | Complete |
| UNIT-03 | Phase 10 | Complete |
| UNIT-04 | Phase 10 | Complete |
| UNIT-05 | Phase 10 | Complete |
| UNIT-06 | Phase 10 | Complete |
| UNIT-07 | Phase 10 | Complete |
| UNIT-08 | Phase 10 | Complete |
| DB-01 | Phase 11 | Complete |
| DB-02 | Phase 11 | Complete |
| DB-03 | Phase 11 | Complete |
| DB-04 | Phase 11 | Complete |
| DB-05 | Phase 11 | Complete |
| WEB-01 | Phase 12 | Complete |
| WEB-02 | Phase 12 | Complete |
| WEB-03 | Phase 12 | Complete |
| WEB-04 | Phase 12 | Complete |
| WEB-05 | Phase 12 | Complete |
| WEB-06 | Phase 12 | Complete |
| WEB-07 | Phase 12 | Complete |
| WEB-08 | Phase 12 | Complete |
| API-01 | Phase 12 | Complete |
| API-02 | Phase 12 | Complete |
| API-03 | Phase 12 | Complete |
| API-04 | Phase 12 | Complete |
| CFG-01 | Phase 13 | Complete |
| CFG-02 | Phase 13 | Complete |
| CFG-03 | Phase 13 | Complete |
| CFG-04 | Phase 13 | Complete |
| CI-01 | Phase 14 | Complete |
| CI-02 | Phase 14 | Complete |
| CI-03 | Phase 14 | Complete |
| CI-04 | Phase 14 | Complete |
| CI-05 | Phase 14 | Complete |
| E2E-01 | Phase 15 | Complete |
| E2E-02 | Phase 15 | Complete |
| E2E-03 | Phase 15 | Complete |
| E2E-04 | Phase 15 | Complete |
| E2E-05 | Phase 15 | Complete |

**Coverage:**
- v1.1 requirements: 45 total
- Shipped: 45/45
- Adjusted: 0
- Dropped: 0

---
*Archived: 2026-02-08 as part of v1.1 milestone completion*
