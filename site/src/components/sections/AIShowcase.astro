---
const tabs = [
  {
    id: "tailor",
    label: "Resume Tailoring",
    image: "/screenshots/tailor-resume.png",
    alt: "Side-by-side diff showing AI-tailored resume changes highlighted in green and red",

    title: "Smart Resume Tailoring",
    description:
      "Generates role-specific resumes with visual diff review and anti-fabrication validation — never invents experience.",
    icon: "file-diff",
  },
  {
    id: "cover-letter",
    label: "Cover Letter",
    image: "/screenshots/cover-letter.png",
    alt: "AI-generated cover letter tailored to job requirements",

    title: "Cover Letter Generation",
    description:
      "One-click cover letters matched to the job description, your experience, and the company's tone.",
    icon: "mail",
  },
  {
    id: "scoring",
    label: "Job Scoring",
    image: "/screenshots/job-scoring.png",
    alt: "AI-powered job scoring with match breakdown and explainable criteria",

    title: "AI Match Scoring",
    description:
      "Claude analyzes each job against your candidate profile, scoring 1–5 with detailed breakdowns of why it matched.",
    icon: "brain",
  },
  {
    id: "interview-prep",
    label: "Interview Prep",
    image: "/screenshots/interview-prep.png",
    alt: "AI-generated interview questions tailored to the job description",

    title: "Interview Preparation",
    description:
      "Generate tailored technical, behavioral, and company-specific interview questions from any job posting — with key topics to review.",
    icon: "mic",
  },
  {
    id: "docs",
    label: "Generated Docs",
    image: "/screenshots/generate-docs.png",
    alt: "List of generated resumes and cover letters with version tracking",

    title: "Document Management",
    description:
      "Track every generated resume and cover letter with model version, timestamps, and download links.",
    icon: "archive",
  },
];
---

<section id="ai-showcase" data-animate class="py-20 bg-white">
  <div class="max-w-5xl mx-auto px-4">
    <!-- Heading -->
    <h2 class="font-display text-3xl font-bold text-surface-900 text-center">
      AI-Powered Tools
    </h2>
    <p class="mt-3 text-surface-600 text-center max-w-2xl mx-auto">
      Score jobs, tailor resumes, generate cover letters, and prep for interviews — all powered by Claude
    </p>

    <!-- Tab bar -->
    <div class="mt-10 flex justify-center gap-2 flex-wrap">
      {tabs.map((tab, i) => (
        <button
          data-ai-tab={tab.id}
          class:list={[
            "px-5 py-2.5 rounded-full text-sm font-semibold transition-all cursor-pointer",
            i === 0
              ? "bg-primary-600 text-white shadow-md"
              : "glass text-surface-600 hover:bg-primary-50 hover:text-primary-600",
          ]}
        >
          {tab.label}
        </button>
      ))}
    </div>

    <!-- Screenshot panels -->
    <div class="mt-8 relative rounded-lg overflow-hidden shadow-xl border border-surface-200">
      {tabs.map((tab, i) => (
        <img
          data-ai-panel={tab.id}
          data-lightbox
          src={tab.image}
          alt={tab.alt}
          loading="lazy"
          class:list={[
            "w-full transition-opacity duration-300",
            i === 0
              ? "relative opacity-100 pointer-events-auto"
              : "absolute inset-0 opacity-0 pointer-events-none",
          ]}
        />
      ))}
    </div>

    <!-- Feature callouts -->
    <div class="mt-8">
      {tabs.map((tab, i) => (
        <div
          data-ai-callout={tab.id}
          class:list={[
            "flex items-start gap-4 p-5 rounded-xl bg-surface-50 border border-surface-200 max-w-xl mx-auto",
            i !== 0 && "hidden",
          ]}
        >
          <div class="w-10 h-10 rounded-lg bg-primary-100 flex items-center justify-center text-primary-600 shrink-0">
            {tab.icon === "brain" && (
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z" />
                <path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z" />
              </svg>
            )}
            {tab.icon === "file-diff" && (
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" />
                <polyline points="14 2 14 8 20 8" />
                <line x1="9" y1="15" x2="15" y2="15" />
                <line x1="9" y1="11" x2="15" y2="11" />
              </svg>
            )}
            {tab.icon === "mail" && (
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="2" y="4" width="20" height="16" rx="2" />
                <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7" />
              </svg>
            )}
            {tab.icon === "mic" && (
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z" />
                <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                <line x1="12" y1="19" x2="12" y2="22" />
              </svg>
            )}
            {tab.icon === "archive" && (
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m21 8-2-2H5L3 8" />
                <rect x="3" y="8" width="18" height="12" rx="1" />
                <path d="M10 12h4" />
              </svg>
            )}
          </div>
          <div>
            <h3 class="font-display font-semibold text-surface-900">
              {tab.title}
            </h3>
            <p class="mt-1 text-sm text-surface-600 leading-relaxed">
              {tab.description}
            </p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
function initAIShowcase() {
  const container = document.getElementById('ai-showcase');
  if (!container) return;

  const buttons = container.querySelectorAll<HTMLButtonElement>('[data-ai-tab]');
  const panels = container.querySelectorAll<HTMLImageElement>('[data-ai-panel]');
  const callouts = container.querySelectorAll<HTMLElement>('[data-ai-callout]');

  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      const tab = btn.dataset.aiTab;

      buttons.forEach(b => {
        const isActive = b.dataset.aiTab === tab;
        b.classList.toggle('bg-primary-600', isActive);
        b.classList.toggle('text-white', isActive);
        b.classList.toggle('shadow-md', isActive);
        b.classList.toggle('glass', !isActive);
        b.classList.toggle('text-surface-600', !isActive);
        b.classList.toggle('hover:bg-primary-50', !isActive);
        b.classList.toggle('hover:text-primary-600', !isActive);
      });

      panels.forEach(p => {
        const isActive = p.dataset.aiPanel === tab;
        if (isActive) {
          p.classList.add('relative', 'opacity-100', 'pointer-events-auto');
          p.classList.remove('absolute', 'inset-0', 'opacity-0', 'pointer-events-none');
        } else {
          p.classList.add('absolute', 'inset-0', 'opacity-0', 'pointer-events-none');
          p.classList.remove('relative', 'opacity-100', 'pointer-events-auto');
        }
      });

      callouts.forEach(c => {
        c.classList.toggle('hidden', c.dataset.aiCallout !== tab);
      });
    });
  });
}

initAIShowcase();
document.addEventListener('astro:page-load', initAIShowcase);
</script>
